<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ipoptml (ipoptml.Ipoptml)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> ‚Äì <a href="../index.html">ipoptml</a> &#x00BB; Ipoptml</nav><h1>Module <code>Ipoptml</code></h1><p>OCaml interface to the IPOPT constrained Non-Linear Program (NLP) solver.</p><dl><dt>see <a href="https://coin-or.github.io/Ipopt/index.html">https://coin-or.github.io/Ipopt/index.html</a></dt><dd><p>for the IPOPT documentation.</p></dd></dl></header><dl><dt class="spec type" id="type-application_return_status"><a href="#type-application_return_status" class="anchor"></a><code><span class="keyword">type</span> application_return_status</code><code> = </code><table class="variant"><tr id="type-application_return_status.SolveSucceeded" class="anchored"><td class="def constructor"><a href="#type-application_return_status.SolveSucceeded" class="anchor"></a><code>| </code><code><span class="constructor">SolveSucceeded</span></code></td></tr><tr id="type-application_return_status.SolvedToAcceptableLevel" class="anchored"><td class="def constructor"><a href="#type-application_return_status.SolvedToAcceptableLevel" class="anchor"></a><code>| </code><code><span class="constructor">SolvedToAcceptableLevel</span></code></td></tr><tr id="type-application_return_status.InfeasibleProblemDetected" class="anchored"><td class="def constructor"><a href="#type-application_return_status.InfeasibleProblemDetected" class="anchor"></a><code>| </code><code><span class="constructor">InfeasibleProblemDetected</span></code></td></tr><tr id="type-application_return_status.SearchDirectionBecomesTooSmall" class="anchored"><td class="def constructor"><a href="#type-application_return_status.SearchDirectionBecomesTooSmall" class="anchor"></a><code>| </code><code><span class="constructor">SearchDirectionBecomesTooSmall</span></code></td></tr><tr id="type-application_return_status.DivergingIterates" class="anchored"><td class="def constructor"><a href="#type-application_return_status.DivergingIterates" class="anchor"></a><code>| </code><code><span class="constructor">DivergingIterates</span></code></td></tr><tr id="type-application_return_status.UserRequestedStop" class="anchored"><td class="def constructor"><a href="#type-application_return_status.UserRequestedStop" class="anchor"></a><code>| </code><code><span class="constructor">UserRequestedStop</span></code></td></tr><tr id="type-application_return_status.FeasiblePointFound" class="anchored"><td class="def constructor"><a href="#type-application_return_status.FeasiblePointFound" class="anchor"></a><code>| </code><code><span class="constructor">FeasiblePointFound</span></code></td></tr><tr id="type-application_return_status.MaximumIterationsExceeded" class="anchored"><td class="def constructor"><a href="#type-application_return_status.MaximumIterationsExceeded" class="anchor"></a><code>| </code><code><span class="constructor">MaximumIterationsExceeded</span></code></td></tr><tr id="type-application_return_status.RestorationFailed" class="anchored"><td class="def constructor"><a href="#type-application_return_status.RestorationFailed" class="anchor"></a><code>| </code><code><span class="constructor">RestorationFailed</span></code></td></tr><tr id="type-application_return_status.ErrorInStepComputation" class="anchored"><td class="def constructor"><a href="#type-application_return_status.ErrorInStepComputation" class="anchor"></a><code>| </code><code><span class="constructor">ErrorInStepComputation</span></code></td></tr><tr id="type-application_return_status.MaximumCpuTimeExceeded" class="anchored"><td class="def constructor"><a href="#type-application_return_status.MaximumCpuTimeExceeded" class="anchor"></a><code>| </code><code><span class="constructor">MaximumCpuTimeExceeded</span></code></td></tr><tr id="type-application_return_status.NotEnoughDegreesOfFreedom" class="anchored"><td class="def constructor"><a href="#type-application_return_status.NotEnoughDegreesOfFreedom" class="anchor"></a><code>| </code><code><span class="constructor">NotEnoughDegreesOfFreedom</span></code></td></tr><tr id="type-application_return_status.InvalidProblemDefinition" class="anchored"><td class="def constructor"><a href="#type-application_return_status.InvalidProblemDefinition" class="anchor"></a><code>| </code><code><span class="constructor">InvalidProblemDefinition</span></code></td></tr><tr id="type-application_return_status.InvalidOption" class="anchored"><td class="def constructor"><a href="#type-application_return_status.InvalidOption" class="anchor"></a><code>| </code><code><span class="constructor">InvalidOption</span></code></td></tr><tr id="type-application_return_status.InvalidNumberDetected" class="anchored"><td class="def constructor"><a href="#type-application_return_status.InvalidNumberDetected" class="anchor"></a><code>| </code><code><span class="constructor">InvalidNumberDetected</span></code></td></tr><tr id="type-application_return_status.UnrecoverableException" class="anchored"><td class="def constructor"><a href="#type-application_return_status.UnrecoverableException" class="anchor"></a><code>| </code><code><span class="constructor">UnrecoverableException</span></code></td></tr><tr id="type-application_return_status.NonIpoptExceptionThrown" class="anchored"><td class="def constructor"><a href="#type-application_return_status.NonIpoptExceptionThrown" class="anchor"></a><code>| </code><code><span class="constructor">NonIpoptExceptionThrown</span></code></td></tr><tr id="type-application_return_status.InsufficientMemory" class="anchored"><td class="def constructor"><a href="#type-application_return_status.InsufficientMemory" class="anchor"></a><code>| </code><code><span class="constructor">InsufficientMemory</span></code></td></tr><tr id="type-application_return_status.InternalError" class="anchored"><td class="def constructor"><a href="#type-application_return_status.InternalError" class="anchor"></a><code>| </code><code><span class="constructor">InternalError</span></code></td></tr></table></dt><dd><p>Return status for the Optimize call for an application.</p></dd></dl><dl><dt class="spec value" id="val-application_return_status_retcode"><a href="#val-application_return_status_retcode" class="anchor"></a><code><span class="keyword">val</span> application_return_status_retcode : <a href="index.html#type-application_return_status">application_return_status</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Maps a return status to the return code of the underlying IPOPT implementation.</p><dl><dt>see <a href="https://coin-or.github.io/Ipopt/IpReturnCodes__inc_8h_source.html">https://coin-or.github.io/Ipopt/IpReturnCodes__inc_8h_source.html</a></dt><dd><p><code>enum ApplicationReturnStatus</code></p></dd></dl></dd></dl><dl><dt class="spec exception" id="exception-Callback_failure"><a href="#exception-Callback_failure" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Callback_failure</span> <span class="keyword">of</span> string</code></dt><dd><p>Exception that should be thrown by failing callback functions.</p></dd></dl><dl><dt class="spec type" id="type-nlp"><a href="#type-nlp" class="anchor"></a><code><span class="keyword">type</span> nlp</code></dt><dd><p>Constrained Non-Linear Program.</p></dd></dl><dl><dt class="spec type" id="type-vec"><a href="#type-vec" class="anchor"></a><code><span class="keyword">type</span> vec</code><code> = <span><span>(float,¬†Stdlib.Bigarray.float64_elt,¬†Bigarray_compat.c_layout)</span> Bigarray_compat.Array1.t</span></code></dt><dd><p>Alias for floating point <span class="xref-unresolved" title="unresolved reference to &quot;Bigarray.Array1&quot;"><code>Bigarray</code>.Array1</span>.</p></dd></dl><dl><dt class="spec type" id="type-eval_f_t"><a href="#type-eval_f_t" class="anchor"></a><code><span class="keyword">type</span> eval_f_t</code><code> = <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Callback function to evaluate the objective function f(x). The function argument <code>x</code> is the values of the variables.</p></dd></dl><dl><dt class="spec type" id="type-eval_grad_f_t"><a href="#type-eval_grad_f_t" class="anchor"></a><code><span class="keyword">type</span> eval_grad_f_t</code><code> = <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Callback function to evaluate the gradient ùõÅf(x) of the objective function. The function arguments are:</p><ul><li><code>x</code>, the values of the variables,</li><li><code>grad_f</code>, a vector for storing the values of ùõÅf(x), in the same order as <code>x</code>. I.e. <code>grad_f.{i}</code> should hold the value of the gradient of f(x) with respect to <code>x.{i}</code>.</li></ul></dd></dl><dl><dt class="spec type" id="type-eval_g_t"><a href="#type-eval_g_t" class="anchor"></a><code><span class="keyword">type</span> eval_g_t</code><code> = <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Callback function to evaluate the constraints g(x). The function arguments are:</p><ul><li><code>x</code>, the values of the variables,</li><li><code>g</code>, a vector for storing the value of g(x).</li></ul></dd></dl><dl><dt class="spec type" id="type-structure_t"><a href="#type-structure_t" class="anchor"></a><code><span class="keyword">type</span> structure_t</code><code> = <span><span>(int * int)</span> array</span></code></dt><dd><p>Encodes the structure of a sparse matrix. The tuple <code>(i, j)</code> in position <code>k</code> associates the matrix element <code>m.(i, j)</code> with the array element <code>a.(k)</code>. If <code>(i, j)</code> appears multiple times in the structure array, <code>m.(i, j)</code> is associated with the sum of these elements in <code>a</code>. Matrix elements missing from the structure array are assumed to be zero.</p><dl><dt>see <a href="https://coin-or.github.io/Ipopt/IMPL.html#TRIPLET">https://coin-or.github.io/Ipopt/IMPL.html#TRIPLET</a></dt><dd><p>for documentation on the triplet format.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-eval_jac_g_t"><a href="#type-eval_jac_g_t" class="anchor"></a><code><span class="keyword">type</span> eval_jac_g_t</code><code> = <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Callback function to evaluate the Jacobian ùõÅg(x)<sup>T</sup> of the constraints. The function arguments are:</p><ul><li><code>x</code>, the values of the variables,</li><li><code>jac_g</code>, a vector for storing the non-zero values of ùõÅg(x)<sup>T</sup>, where <code>jac_g</code> assumes some pre-defined <a href="index.html#type-structure_t"><code>structure_t</code></a>.</li></ul></dd></dl><dl><dt class="spec type" id="type-eval_h_t"><a href="#type-eval_h_t" class="anchor"></a><code><span class="keyword">type</span> eval_h_t</code><code> = <span>sigma:float</span> <span>&#45;&gt;</span> <span>x:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> <span>lambda:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> <span>h:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Callback function to evaluate the Hessian œÉùõÅ<sup>2</sup>f(x<sub>k</sub>) + Œ£<sub>i</sub>[Œª<sub>i</sub>ùõÅ<sup>2</sup>g<sub>i</sub>(x<sub>k</sub>)] of the Lagrangian. The function arguments are:</p><ul><li><code>sigma</code>, the factor œÉ in front of the objective term,</li><li><code>x</code>, the values of the variables,</li><li><code>lambda</code>, the values of the constraint multiplier Œª,</li><li><code>h</code>, a vector for storing the non-zero values of the Hessian, where <code>h</code> assumes some pre-defined <a href="index.html#type-structure_t"><code>structure_t</code></a>. This matrix is symmetric and only the lower diagonal entries must be specified.</li></ul></dd></dl><dl><dt class="spec value" id="val-create_nlp"><a href="#val-create_nlp" class="anchor"></a><code><span class="keyword">val</span> create_nlp : <span>eval_f:<a href="index.html#type-eval_f_t">eval_f_t</a></span> <span>&#45;&gt;</span> <span>eval_grad_f:<a href="index.html#type-eval_grad_f_t">eval_grad_f_t</a></span> <span>&#45;&gt;</span> <span>eval_g:<a href="index.html#type-eval_g_t">eval_g_t</a></span> <span>&#45;&gt;</span> <span>jac_g_structure:<a href="index.html#type-structure_t">structure_t</a></span> <span>&#45;&gt;</span> <span>eval_jac_g:<a href="index.html#type-eval_jac_g_t">eval_jac_g_t</a></span> <span>&#45;&gt;</span> <span>h_structure:<a href="index.html#type-structure_t">structure_t</a></span> <span>&#45;&gt;</span> <span>eval_h:<a href="index.html#type-eval_h_t">eval_h_t</a></span> <span>&#45;&gt;</span> <span>lb:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> <span>ub:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> <span>constraints_lb:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> <span>constraints_ub:<a href="index.html#type-vec">vec</a></span> <span>&#45;&gt;</span> <a href="index.html#type-nlp">nlp</a></code></dt><dd><p>Creates a constrained NLP: min<sub>x</sub>[f(x)] s.t. xL<sub>k</sub> ‚â§ x<sub>k</sub> ‚â§ xU<sub>k</sub> and gL<sub>i</sub> ‚â§ g<sub>i</sub>(x) ‚â§ gU<sub>i</sub>.</p><dl><dt>parameter eval_f</dt><dd><p>Callback function to evaluate objective function <a href="index.html#type-eval_f_t"><code>eval_f_t</code></a>.</p></dd></dl><dl><dt>parameter eval_grad_f</dt><dd><p>Callback function to evaluate the gradient of the objective function <a href="index.html#type-eval_grad_f_t"><code>eval_grad_f_t</code></a>.</p></dd></dl><dl><dt>parameter eval_g</dt><dd><p>Callback function to evaluate the constraint function <a href="index.html#type-eval_g_t"><code>eval_g_t</code></a>.</p></dd></dl><dl><dt>parameter jac_g_structure</dt><dd><p>Structure of the constraint Jacobian <a href="index.html#type-structure_t"><code>structure_t</code></a>.</p></dd></dl><dl><dt>parameter eval_jac_g</dt><dd><p>Callback function to evaluate the Jacobian of the constraint function <a href="index.html#type-eval_jac_g_t"><code>eval_jac_g_t</code></a>.</p></dd></dl><dl><dt>parameter h_structure</dt><dd><p>Structure of the Hessian of the Lagrangian <a href="index.html#type-structure_t"><code>structure_t</code></a>.</p></dd></dl><dl><dt>parameter eval_h</dt><dd><p>Callback function to evaluate the Hessian of the Lagrangian <a href="index.html#type-eval_h_t"><code>eval_h_t</code></a>.</p></dd></dl><dl><dt>parameter lb</dt><dd><p>Lower bounds on the variables xL<sub>k</sub>.</p></dd></dl><dl><dt>parameter ub</dt><dd><p>Upper bounds on the variables xU<sub>k</sub>.</p></dd></dl><dl><dt>parameter constraints_lb</dt><dd><p>Lower bounds on the constraints gL<sub>i</sub>.</p></dd></dl><dl><dt>parameter constraints_ub</dt><dd><p>Upper bounds on the constraints gU<sub>i</sub>.</p></dd></dl><dl><dt>returns</dt><dd><p>A constrained NLP.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-add_str_option"><a href="#val-add_str_option" class="anchor"></a><code><span class="keyword">val</span> add_str_option : <a href="index.html#type-nlp">nlp</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>add_str_option p key val</code> sets the option <code>key</code> to the <code>string</code> value <code>val</code> in the NLP <code>p</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>If the option is invalid.</p></dd></dl><dl><dt>see <a href="https://coin-or.github.io/Ipopt/OPTIONS.html">https://coin-or.github.io/Ipopt/OPTIONS.html</a></dt><dd><p>for a summary of options.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-add_num_option"><a href="#val-add_num_option" class="anchor"></a><code><span class="keyword">val</span> add_num_option : <a href="index.html#type-nlp">nlp</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> float <span>&#45;&gt;</span> unit</code></dt><dd><p>As <a href="index.html#val-add_str_option"><code>add_str_option</code></a>, but for <code>float</code> values.</p></dd></dl><dl><dt class="spec value" id="val-add_int_option"><a href="#val-add_int_option" class="anchor"></a><code><span class="keyword">val</span> add_int_option : <a href="index.html#type-nlp">nlp</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>As <a href="index.html#val-add_str_option"><code>add_str_option</code></a>, but for <code>int</code> values.</p></dd></dl><dl><dt class="spec value" id="val-solve"><a href="#val-solve" class="anchor"></a><code><span class="keyword">val</span> solve : <a href="index.html#type-nlp">nlp</a> <span>&#45;&gt;</span> <span>?&#8288;g:<span><a href="index.html#type-vec">vec</a> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;mult_g:<span><a href="index.html#type-vec">vec</a> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;mult_lb:<span><a href="index.html#type-vec">vec</a> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;mult_ub:<span><a href="index.html#type-vec">vec</a> option</span></span> <span>&#45;&gt;</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> <a href="index.html#type-application_return_status">application_return_status</a> * float</code></dt><dd><p><code>solve p x</code> tries to solve the constrained NLP <code>p</code> with initial values <code>x</code>.</p><dl><dt>parameter p</dt><dd><p>The constrained NLP.</p></dd></dl><dl><dt>parameter g</dt><dd><p>A vector for storing the final values of the constraints.</p></dd></dl><dl><dt>parameter mult_g</dt><dd><p>Initial values of the constraint multipliers (only if warm start option is chosen). Will hold final values of the constraint multipliers after calling <code>solve</code>.</p></dd></dl><dl><dt>parameter mult_lb</dt><dd><p>Initial values for the multiplies of the variable lower bounds (only if warm start option is chosen). Will hold final values for the multipliers of the variable lower bounds after calling <code>solve</code>.</p></dd></dl><dl><dt>parameter mult_ub</dt><dd><p>Initial values for the multiplies of the variable upper bounds (only if warm start option is chosen). Will hold final values for the multipliers of the variable upper bounds after calling <code>solve</code>.</p></dd></dl><dl><dt>parameter x</dt><dd><p>Initial values of the variables. Will hold the optimal solution after calling <code>solve</code>.</p></dd></dl><dl><dt>returns</dt><dd><p>The tuple <code>(rs, f)</code>, where <code>rs</code> is the return status <a href="index.html#type-application_return_status"><code>application_return_status</code></a> and <code>f</code> is the final value of the objective function.</p></dd></dl></dd></dl></div></body></html>